(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{21:function(t,e,n){"use strict";var o=n(0),c=n.n(o),r=n(1),i=n.n(r),a=n(5),u=n.n(a),s=n(4),f=n.n(s),p=n(13),l=n(17),h=n.n(l),d={},b=0,m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"/"===t?t:function(t){var e=t,n=d[e]||(d[e]={});if(n[t])return n[t];var o=h.a.compile(t);return b<1e4&&(n[t]=o,b++),o}(t)(e,{pretty:!0})},y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t};var v=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},e.prototype.componentWillMount=function(){f()(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},e.prototype.componentDidMount=function(){this.isStatic()||this.perform()},e.prototype.componentDidUpdate=function(t){var e=Object(p.b)(t.to),n=Object(p.b)(this.props.to);Object(p.c)(e,n)?u()(!1,"You tried to redirect to the same route you're currently on: \""+n.pathname+n.search+'"'):this.perform()},e.prototype.computeTo=function(t){var e=t.computedMatch,n=t.to;return e?"string"===typeof n?m(n,e.params):y({},n,{pathname:m(n.pathname,e.params)}):n},e.prototype.perform=function(){var t=this.context.router.history,e=this.props.push,n=this.computeTo(this.props);e?t.push(n):t.replace(n)},e.prototype.render=function(){return null},e}(c.a.Component);v.propTypes={computedMatch:i.a.object,push:i.a.bool,from:i.a.string,to:i.a.oneOfType([i.a.string,i.a.object]).isRequired},v.defaultProps={push:!1},v.contextTypes={router:i.a.shape({history:i.a.shape({push:i.a.func.isRequired,replace:i.a.func.isRequired}).isRequired,staticContext:i.a.object}).isRequired};var j=v;e.a=j},99:function(t,e,n){"use strict";n.r(e);var o=n(6),c=n(7),r=n(9),i=n(8),a=n(10),u=n(3),s=n(0),f=n.n(s),p=n(21),l=n(11);var h=n(16),d=Object(s.lazy)(function(){return Promise.all([n.e(7),n.e(5)]).then(n.bind(null,94))}),b=Object(s.lazy)(function(){return n.e(6).then(n.bind(null,93))}),m=function(t){return f.a.createElement("article",{className:"wrapper center"},f.a.createElement("h1",null,"Verifying profile"),f.a.createElement("span",null,"Please wait...like you have a choice"))},y=function(t){function e(t){var n;return Object(o.a)(this,e),(n=Object(r.a)(this,Object(i.a)(e).call(this,t))).state={accountVerified:null,component:f.a.createElement(m,null)},n.checkAccountToken=n.checkAccountToken.bind(Object(u.a)(Object(u.a)(n))),n.checkAccountVerification=n.checkAccountVerification.bind(Object(u.a)(Object(u.a)(n))),n.failedAccountVerification=n.failedAccountVerification.bind(Object(u.a)(Object(u.a)(n))),n.failedVerificationRedirect=n.failedVerificationRedirect.bind(Object(u.a)(Object(u.a)(n))),n}return Object(a.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.checkAccountToken()}},{key:"checkAccountToken",value:function(){var t=this;new Promise(function(t,e){fetch("http://localhost:8080/verify-token",{method:"GET",credentials:"include"}).then(function(e){return t(e)}).catch(function(t){return e(t)})}).then(function(t){return t.json()}).then(function(e){return t.checkAccountVerification(e)}).catch(function(e){return t.failedAccountVerification(e)})}},{key:"checkAccountVerification",value:function(t){var e=this;return new Promise(function(n,o){console.log("server response: ".concat(JSON.stringify(t),"\n")),t.accountVerified?(e.setState({accountVerified:!0,component:f.a.createElement(d,null)}),e.props.newNotification("Account Verified",3e3,"success"),n()):o("Account not verified")})}},{key:"failedAccountVerification",value:function(t){console.error(t),this.setState({accountVerified:!1,component:f.a.createElement(b,null)},this.failedVerificationRedirect())}},{key:"failedVerificationRedirect",value:function(){var t=this;setTimeout(function(){t.setState({component:f.a.createElement(p.a,{to:"".concat(t.props.basePath,"login")})})},3e3)}},{key:"render",value:function(){return this.state.component}}]),e}(s.Component);e.default=function(t){return f.a.createElement(h.a.Consumer,null,function(e){var n=e.newNotification;return f.a.createElement(l.a.Consumer,null,function(e){var o=e.basePath;return f.a.createElement(y,Object.assign({},t,{basePath:o,newNotification:n}))})})}}}]);
//# sourceMappingURL=3.2481f0aa.chunk.js.map