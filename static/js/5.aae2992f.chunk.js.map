{"version":3,"sources":["components/chat/userProfile/comms/comms.js","components/chat/userProfile/categoriesPanel/ChannelsCategory/CategoryList/channelItem/channelItem.js","components/chat/userProfile/categoriesPanel/ChannelsCategory/CategoryList/categoryList.js","components/chat/userProfile/categoriesPanel/ChannelsCategory/channelsCategory.js","components/chat/userProfile/categoriesPanel/OnlineUsersCategory/UserList/userItem/userItem.js","components/chat/userProfile/categoriesPanel/OnlineUsersCategory/UserList/userList.js","components/chat/userProfile/categoriesPanel/OnlineUsersCategory/onlineUsersCategory.js","components/chat/userProfile/categoriesPanel/categoriesPanel.js","components/chat/userProfile/chatView/chatInput/chatInput.js","components/chat/userProfile/chatView/channelMessages/messageItem/messageItem.js","components/chat/userProfile/chatView/channelMessages/channelMessages.js","components/chat/userProfile/chatView/chatView.js","components/chat/userProfile/signout/signout.js","components/chat/userProfile/userProfile.js"],"names":["comms","username","url","onMsgReceived","socket","io","query","on","count","console","log","concat","users","user","userId","msg","join","data","emit","JSON","stringify","response","leave","sendGroupMsg","channel","sendPrivateMsg","sendTo","close","ChannelItem","react_default","a","createElement","id","this","props","className","PureComponent","CategoryList","Fragment","category","onClick","onChannelSelect","channelList","map","channelItem","key","ChannelsCategory","_ref","allChannels","allChannelRefs","categoryList","displayCategoryTitle","channelRef","UserItem","data-socketid","UserList","_this","onUserSelect","Object","keys","userList","userItem","socketId","OnlineUsersCategory","UserList_userList","CategoriesPanel","signout","src","alt","channelsCategory","onlineUsersCategory","allOnlineUsers","ChatInput","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","input","inputRef","React","createRef","onChange","bind","assertThisInitialized","onSubmit","current","focus","e","setState","target","value","preventDefault","test","name","text","timestamp","Date","toUTCString","sendNewMsg","type","placeholder","ref","ChatInputContext","authenticationContext","Consumer","isUserAuthenticated","chatInput_ChatInput","assign","MessageItem","ChannelMessages","scrollbarRef","scrollTop","scrollHeight","messages","index","messageItem","Component","ChatView","channelInfo","channelMessages","chatInput","SigningOut","Signout","isSignoutComplete","_this2","setTimeout","Redirect","to","env","routePath","signout_SigningOut","UserProfile","allChannelData","Groups","general","random","listenHereGuy","PMs","Jerry","BirdPerson","Online Users","addNewMsg","createChannel","deleteChannel","addMsgToChannel","updateSelectedChannelMessages","updateAllChannels","updateOnlineUsers","socketSetup","sendMsgToServer","userSignout","isSigningOut","selectedChannel","onlineUsers","currentTarget","newCategory","replace","newChannel","getAttribute","length","undefined","push","_this$state$selectedC","objectSpread","isGroupMsg","appServer","socketDomain","parse","updatedOnlineUsers","signout_signout","categoriesPanel","chatView","UserProfileContext","userProfile_UserProfile"],"mappings":"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","file":"static/js/5.aae2992f.chunk.js","sourcesContent":["import io from 'socket.io-client';\r\n\r\nfunction comms(username, url, onMsgReceived) {\r\n  const socket = io(url, {\r\n    query: {\r\n      username: username\r\n    }\r\n  });\r\n\r\n  // events listening on here\r\n  socket.on('users.count', count =>\r\n    console.log(`current users online: ${count}\\n`)\r\n  );\r\n\r\n  // object of all users containing each socket.id & username - received on initial server connection\r\n  socket.on('users.all-online', users => {\r\n    onMsgReceived('all online users', users); // sends users to userProfile to update onlineUsers state\r\n  });\r\n\r\n  socket.on('users.add-online-user', user => {\r\n    onMsgReceived('add online user', user);\r\n  });\r\n\r\n  socket.on('users.remove-online-user', userId => {\r\n    onMsgReceived('remove online user', userId);\r\n  });\r\n\r\n  // user received a message from a group they're subscribed to\r\n  socket.on('user.receive-group-msg', msg => {\r\n    onMsgReceived('new group message', msg); // adds message to group's channel\r\n  });\r\n\r\n  // user received a private message from an online user\r\n  socket.on('user.receive-private-msg', msg => {\r\n    onMsgReceived('new private message', msg); // adds message to PMs\r\n  });\r\n\r\n  // returns functions available for client\r\n  return {\r\n    // \"data\" is an array of channels (rooms) that the socket will join on the server\r\n    join: function(data) {\r\n      socket.emit('user.join-channels', JSON.stringify(data), function(\r\n        response\r\n      ) {\r\n        console.log(`user.join-channels response: ${response}\\n`);\r\n      });\r\n    },\r\n\r\n    // \"data\" is an array of channels (rooms) that the socket will leave on the server\r\n    leave: function(data) {\r\n      socket.emit('user.leave-channels', JSON.stringify(data), function(\r\n        response\r\n      ) {\r\n        console.log(`user.leave-channels response: ${response}\\n`);\r\n      });\r\n    },\r\n\r\n    // user sending message to a group - the 'channel' part isn't serialized because it's for the server\r\n    sendGroupMsg: function(data) {\r\n      socket.emit('user.send-group-msg', {\r\n        channel: data.channel,\r\n        msg: JSON.stringify(data)\r\n      });\r\n    },\r\n\r\n    // user sending message to specific user\r\n    sendPrivateMsg: function(data) {\r\n      socket.emit('user.send-private-msg', {\r\n        sendTo: data.sendTo,\r\n        msg: JSON.stringify(data.msg)\r\n      });\r\n    },\r\n\r\n    // manually disconnect socket - user signs out / navigates away from page\r\n    close: function() {\r\n      socket.close();\r\n    }\r\n  };\r\n}\r\n\r\nexport default comms;\r\n","import React, { PureComponent } from 'react';\r\n\r\nclass ChannelItem extends PureComponent {\r\n  render() {\r\n    return (\r\n      <li id={this.props.channel} className=\"channel\">\r\n        {this.props.channel}\r\n      </li>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ChannelItem;\r\n","import React, { PureComponent } from 'react';\r\nimport ChannelItem from './channelItem/channelItem';\r\n\r\nclass CategoryList extends PureComponent {\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <h3 id={`${this.props.category}-category`} className=\"category-title\">\r\n          {this.props.category}\r\n        </h3>\r\n\r\n        <ul\r\n          id={`${this.props.category}-list`}\r\n          className=\"category-channels-list\"\r\n          onClick={this.props.onChannelSelect}\r\n        >\r\n          {this.props.channelList.map(channel => (\r\n            <ChannelItem key={channel} channel={channel} />\r\n          ))}\r\n        </ul>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CategoryList;\r\n","import React from 'react';\r\nimport CategoryList from './CategoryList/categoryList';\r\n\r\nconst ChannelsCategory = ({ allChannels, allChannelRefs, onChannelSelect }) => {\r\n  const Groups = 'Groups';\r\n  const PMs = 'PMs';\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <h2 className=\"category-section-header\">Channels</h2>\r\n      <div className=\"category-section\">\r\n        <CategoryList\r\n          category={Groups}\r\n          displayCategoryTitle={true}\r\n          channelRef={allChannelRefs[Groups]}\r\n          onChannelSelect={onChannelSelect}\r\n          channelList={allChannels[Groups]}\r\n        />\r\n\r\n        <CategoryList\r\n          category={PMs}\r\n          displayCategoryTitle={true}\r\n          channelRef={allChannelRefs[PMs]}\r\n          onChannelSelect={onChannelSelect}\r\n          channelList={allChannels[PMs]}\r\n        />\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default ChannelsCategory;\r\n","import React, { PureComponent } from 'react';\r\n\r\nclass UserItem extends PureComponent {\r\n  render() {\r\n    return (\r\n      <li\r\n        id={this.props.username}\r\n        data-socketid={this.props.userId}\r\n        className=\"channel\"\r\n      >\r\n        {this.props.username}\r\n      </li>\r\n    );\r\n  }\r\n}\r\n\r\nexport default UserItem;\r\n","import React, { PureComponent } from 'react';\r\nimport UserItem from './userItem/userItem';\r\n\r\nclass UserList extends PureComponent {\r\n  render() {\r\n    return (\r\n      <ul\r\n        id={'online-users-list'}\r\n        className=\"category-channels-list\"\r\n        onClick={this.props.onUserSelect}\r\n      >\r\n        {Object.keys(this.props.userList).map(user => (\r\n          <UserItem\r\n            key={user}\r\n            userId={this.props.userList[user].socketId}\r\n            username={this.props.userList[user].username}\r\n          />\r\n        ))}\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n\r\nexport default UserList;\r\n","import React from 'react';\r\nimport UserList from './UserList/userList';\r\n\r\nconst OnlineUsersCategory = ({ channelRef, onUserSelect, userList }) => {\r\n  return (\r\n    <React.Fragment>\r\n      <h2 className=\"category-section-header\">Online Users</h2>\r\n      <div className=\"category-section\">\r\n        <UserList\r\n          channelRef={channelRef}\r\n          onUserSelect={onUserSelect}\r\n          userList={userList}\r\n        />\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default OnlineUsersCategory;\r\n","import React, { PureComponent } from 'react';\r\nimport ChannelsCategory from './ChannelsCategory/channelsCategory';\r\nimport OnlineUsersCategory from './OnlineUsersCategory/onlineUsersCategory';\r\n\r\nclass CategoriesPanel extends PureComponent {\r\n  render() {\r\n    return (\r\n      <section className=\"side-panel\">\r\n        <button id=\"logout\" className=\"link-to\" onClick={this.props.signout}>\r\n          <img\r\n            src=\"../assets/svg/placeholder/logout-black.svg\"\r\n            alt=\"user logout\"\r\n          />\r\n        </button>\r\n\r\n        <nav id=\"all-categories\" className=\"scrollbar\">\r\n          <ChannelsCategory\r\n            allChannels={this.props.allChannels}\r\n            allChannelRefs={this.props.allChannelRefs}\r\n            onChannelSelect={this.props.onChannelSelect}\r\n          />\r\n\r\n          <OnlineUsersCategory\r\n            channelRef={this.props.allChannelRefs['Online Users']}\r\n            onUserSelect={this.props.onChannelSelect}\r\n            userList={this.props.allOnlineUsers}\r\n          />\r\n        </nav>\r\n\r\n        <span id=\"current-user\">{this.props.username}</span>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CategoriesPanel;\r\n","import React, { PureComponent } from 'react';\r\nimport AuthenticationContext from '../../../../authentication/authenticationContext';\r\n\r\n// using pure component so if a message is received in the current channel, this component won't needlessly re-render\r\nclass ChatInput extends PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = { input: '' };\r\n    this.inputRef = React.createRef();\r\n\r\n    this.onChange = this.onChange.bind(this);\r\n    this.onSubmit = this.onSubmit.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.inputRef.current.focus();\r\n  }\r\n\r\n  onChange(e) {\r\n    this.setState({ input: e.target.value });\r\n  }\r\n\r\n  onSubmit(e) {\r\n    e.preventDefault();\r\n    const isMessageValid = /\\S+/; // only non-empty not-only space strings are valid\r\n\r\n    if (isMessageValid.test(this.state.input)) {\r\n      // sent to userProfile to append msg and send to server\r\n      const msg = {\r\n        category: this.props.category, // category msg is intended for\r\n        channel: this.props.name, // channel msg is intended for\r\n        username: this.props.username, // username of sender (current user)\r\n        text: this.state.input, // msg being sent\r\n        timestamp: new Date().toUTCString()\r\n      };\r\n\r\n      this.setState({ input: '' }); // clears inputfield\r\n      this.props.sendNewMsg(msg); // appends message & sends to server\r\n    } else {\r\n      console.log('invalid input');\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"chat-input-container\">\r\n        <form id=\"chat-input-form\" onSubmit={this.onSubmit}>\r\n          <input\r\n            id=\"chat-inputfield\"\r\n            className=\"rounded-border\"\r\n            type=\"text\"\r\n            value={this.state.input}\r\n            placeholder={\r\n              'Say something ' +\r\n              (this.props.category === 'Groups' ? 'in' : 'to') +\r\n              ` #${this.props.name}`\r\n            }\r\n            onChange={this.onChange}\r\n            ref={this.inputRef}\r\n          />\r\n\r\n          <img\r\n            className=\"chat-submit\"\r\n            src=\"./assets/svg/placeholder/round-arrow.svg\"\r\n            alt=\"send button\"\r\n            onClick={this.onSubmit}\r\n          />\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst ChatInputContext = props => {\r\n  return (\r\n    <AuthenticationContext.Consumer>\r\n      {({ isUserAuthenticated }) => (\r\n        <ChatInput {...props} username={isUserAuthenticated.username} />\r\n      )}\r\n    </AuthenticationContext.Consumer>\r\n  );\r\n};\r\n\r\nexport default ChatInputContext;\r\n","import React, { PureComponent } from 'react';\r\n\r\nclass MessageItem extends PureComponent {\r\n  render() {\r\n    return (\r\n      <li className=\"channel-msg\">\r\n        <img\r\n          className=\"avatar\"\r\n          src=\"./assets/svg/user-icon.svg\"\r\n          alt=\"user avatar\"\r\n        />\r\n        <div className=\"msg-container\">\r\n          <div>\r\n            <span className=\"msg username\">{this.props.msg.username}</span>\r\n            <span className=\"msg timestamp\">{this.props.msg.timestamp}</span>\r\n          </div>\r\n          <p className=\"msg text\">{this.props.msg.text}</p>\r\n        </div>\r\n      </li>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MessageItem;\r\n","import React, { Component } from 'react';\r\nimport MessageItem from './messageItem/messageItem';\r\n\r\nclass ChannelMessages extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    // used to scroll to the bottom of the message view when a new message is added\r\n    this.scrollbarRef = React.createRef();\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    // scroll to bottom of message view\r\n    this.scrollbarRef.current.scrollTop = this.scrollbarRef.current.scrollHeight;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        id=\"channel-messages-container\"\r\n        className=\"scrollbar\"\r\n        ref={this.scrollbarRef}\r\n      >\r\n        <ul id=\"channel-messages-list\">\r\n          {this.props.messages.map((msg, index) => (\r\n            <MessageItem key={index} msg={msg} />\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ChannelMessages;\r\n","import React from 'react';\r\nimport ChatInput from './chatInput/chatInput';\r\nimport ChannelMessages from './channelMessages/channelMessages';\r\n\r\nconst ChatView = ({ channelInfo, sendNewMsg }) => {    \r\n  return (\r\n    <main id='chat-view'>\r\n      <div id='channel-title'>\r\n        <h1>{`#${channelInfo.name}`}</h1>\r\n      </div>\r\n\r\n      <ChannelMessages messages={channelInfo.messages} />\r\n      <ChatInput category={channelInfo.category} name={channelInfo.name} sendNewMsg={sendNewMsg} />\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default ChatView;","import React, { PureComponent } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport env from '../../../../env';\r\n\r\nconst SigningOut = () => {\r\n  return (\r\n    <section className=\"wrapper center\">\r\n      <h1>Signing out...</h1>\r\n    </section>\r\n  );\r\n};\r\n\r\nclass Signout extends PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    // once true, user's login data has been removed and they're redirected to the homepage\r\n    this.state = { isSignoutComplete: false };\r\n  }\r\n\r\n  // displays \"signing out\" screen for two seconds before redirect\r\n  componentDidMount() {\r\n    setTimeout(() => {\r\n      this.setState({ isSignoutComplete: true });\r\n    }, 2000);\r\n  }\r\n\r\n  render() {\r\n    return this.state.isSignoutComplete ? (\r\n      <Redirect to={env.routePath} />\r\n    ) : (\r\n      <SigningOut />\r\n    );\r\n  }\r\n}\r\n\r\nexport default Signout;\r\n","import React, { Component } from 'react';\r\nimport comms from './comms/comms';\r\nimport AuthenticationContext from '../../authentication/authenticationContext';\r\nimport env from '../../../env';\r\nimport CategoriesPanel from './categoriesPanel/categoriesPanel';\r\nimport ChatView from './chatView/chatView';\r\nimport Signout from './signout/signout';\r\n\r\nclass UserProfile extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    // stores all channel categories --> channels (within category) --> messages (within channel)\r\n    this.allChannelData = {\r\n      Groups: {\r\n        general: [\r\n          // default channel (displayed on first chat-view render). all users subscribed to this on connection\r\n          {\r\n            // test message\r\n            username: 'BirdPerson',\r\n            text: 'In bird culture, this is considered a dick move',\r\n            timestamp: new Date().toUTCString()\r\n          },\r\n\r\n          {\r\n            // test message\r\n            username: 'Morty',\r\n            text: 'Ah jeez!',\r\n            timestamp: new Date().toUTCString()\r\n          }\r\n        ],\r\n\r\n        random: [\r\n          // all users subscribed to this on connection\r\n          {\r\n            // test message\r\n            username: 'ThatOneGuy',\r\n            text: 'Ayyyyy! ',\r\n            timestamp: new Date().toUTCString()\r\n          }\r\n        ],\r\n\r\n        listenHereGuy: [] // testing - user defined group\r\n      },\r\n\r\n      PMs: {\r\n        Jerry: [\r\n          {\r\n            username: 'Jerry',\r\n            text: 'Is this thing on?',\r\n            timestamp: new Date().toUTCString()\r\n          }\r\n        ],\r\n\r\n        BirdPerson: [\r\n          {\r\n            username: 'BirdPerson',\r\n            text:\r\n              'You appear to be dying. I will make efforts to prevent this, but can promise nothing.',\r\n            timestamp: new Date().toUTCString()\r\n          }\r\n        ]\r\n      }\r\n    };\r\n\r\n    // currently not being used. May use this for imperative animation, but might just move to css\r\n    this.allChannelRefs = {\r\n      Groups: React.createRef(),\r\n      PMs: React.createRef(),\r\n      'Online Users': React.createRef()\r\n    };\r\n\r\n    // channel clicked in categoriesPanel\r\n    this.onChannelSelect = this.onChannelSelect.bind(this);\r\n\r\n    // when user sends or receives a message, this appends it to its channel messages\r\n    this.addNewMsg = this.addNewMsg.bind(this);\r\n\r\n    /* creates a new channel if the user creates a new channel or receives a message \r\n           on a channel that isn't stored in this.allMessages */\r\n    this.createChannel = this.createChannel.bind(this);\r\n\r\n    // deletes the current channel & updates allChannels state, given the category and channel name\r\n    this.deleteChannel = this.deleteChannel.bind(this);\r\n\r\n    // adds the new message to the specified channel\r\n    this.addMsgToChannel = this.addMsgToChannel.bind(this);\r\n\r\n    /* once a new message is added to allChannelData[category][channel],\r\n         this checks if the state for the selected channel's messages needs to update */\r\n    this.updateSelectedChannelMessages = this.updateSelectedChannelMessages.bind(\r\n      this\r\n    );\r\n\r\n    // updates the allChannels state when a new channel is added\r\n    this.updateAllChannels = this.updateAllChannels.bind(this);\r\n\r\n    // updates the current onlineUsers state when a user connects, disconnects, or when you initially get the user list\r\n    this.updateOnlineUsers = this.updateOnlineUsers.bind(this);\r\n\r\n    // socket.IO connection with the application server\r\n    this.socket = null;\r\n\r\n    // socket.IO connection setup\r\n    this.socketSetup = this.socketSetup.bind(this);\r\n\r\n    // appends new message from user to list, then sends to server\r\n    this.sendMsgToServer = this.sendMsgToServer.bind(this);\r\n\r\n    // msg received from server - either from a group or a specific user\r\n    this.onMsgReceived = this.onMsgReceived.bind(this);\r\n\r\n    // on user signout, deletes the authentication data & displays <SigningOut />\r\n    this.userSignout = this.userSignout.bind(this);\r\n\r\n    this.state = {\r\n      isSigningOut: false, // determines if the sign out screen is displayed\r\n\r\n      selectedChannel: {\r\n        // info about selected channel (displayed in chatView)\r\n        category: 'Groups', // category channel data exists: can be either \"Groups\" or \"PMs\"\r\n        name: 'general', // name of selected channel\r\n        messages: this.allChannelData['Groups']['general'] // messages from selected channel\r\n      },\r\n\r\n      allChannels: {\r\n        // all channels for each of the two groups\r\n        Groups: Object.keys(this.allChannelData['Groups']),\r\n        PMs: Object.keys(this.allChannelData['PMs'])\r\n      },\r\n\r\n      onlineUsers: {} // updated after initial socket connection\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.socketSetup();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.socket.close(); // disconnects from server\r\n  }\r\n\r\n  onChannelSelect(e) {\r\n    e.preventDefault();\r\n    console.log('onChannelSelect()');\r\n\r\n    // update selectedChannel state ONLY if a new channel is selected\r\n    if (\r\n      e.target.id !== this.state.selectedChannel.name &&\r\n      e.currentTarget.id !== e.target.id\r\n    ) {\r\n      let newCategory = e.currentTarget.id.replace('-list', ''); // category selected\r\n      let newChannel = e.target.id; // channel selected\r\n\r\n      console.log(`\\tcategory: ${newCategory}`);\r\n      console.log(`\\tchannel: ${newChannel}\\n`);\r\n\r\n      //  user selected the online users category, which is saved in the PMs category\r\n      if (newCategory === 'online-users') {\r\n        newCategory = 'PMs';\r\n\r\n        console.log(`\\tdata id: ${e.target.getAttribute('data-socketid')}\\n`);\r\n      }\r\n\r\n      // if no messages were sent / received on the current channel, remove it from the channel list\r\n      if (this.state.selectedChannel.messages.length === 0) {\r\n        this.deleteChannel(\r\n          this.state.selectedChannel.category,\r\n          this.state.selectedChannel.name\r\n        );\r\n      }\r\n\r\n      this.createChannel(newCategory, newChannel); // creates a new channel if one doesn't exist\r\n\r\n      const selectedChannel = {\r\n        category: newCategory,\r\n        name: newChannel,\r\n        messages: this.allChannelData[newCategory][newChannel]\r\n      };\r\n\r\n      this.setState({ selectedChannel });\r\n    } else {\r\n      console.log('same channel selected');\r\n    }\r\n  }\r\n\r\n  // adds new message to specified channel\r\n  addNewMsg(msg) {\r\n    const { category, channel } = msg; // channel the current message is intended for\r\n\r\n    this.createChannel(category, channel); // creates channel if it doesn't exist\r\n    this.addMsgToChannel(msg); //adds message to this.channelData[category][channel]\r\n    this.updateSelectedChannelMessages(channel); // updates selected channel's msgs ONLY if a new msg was added\r\n  }\r\n\r\n  // creates channel with no messages if it doesn't exist & updates allChannels state\r\n  createChannel(category, channel) {\r\n    if (this.allChannelData[category][channel] === undefined) {\r\n      //channel doesn't exist\r\n      this.allChannelData[category][channel] = []; // creates channel\r\n\r\n      this.updateAllChannels(category, channel); // updates allChannels state\r\n    }\r\n  }\r\n\r\n  // deletes the current channel & updates allChannels state, given the category and channel name\r\n  deleteChannel(category, channel) {\r\n    delete this.allChannelData[category][channel]; // deletes the specified channel\r\n    this.updateAllChannels(category); // updates the allChannel state\r\n  }\r\n\r\n  // appends new message to specified channel\r\n  addMsgToChannel(msg) {\r\n    this.allChannelData[msg.category][msg.channel].push({\r\n      username: msg.username,\r\n      text: msg.text,\r\n      timestamp: msg.timestamp\r\n    });\r\n  }\r\n\r\n  // updates selected channel messages state when a new message is added to the selected channel\r\n  updateSelectedChannelMessages(channel) {\r\n    if (channel === this.state.selectedChannel.name) {\r\n      // new msg from selected channel\r\n      const selectedChannel = this.state.selectedChannel;\r\n      const { category, name } = this.state.selectedChannel;\r\n      selectedChannel.messages = this.allChannelData[category][name]; // use new msg list\r\n\r\n      this.setState({ selectedChannel });\r\n    }\r\n  }\r\n\r\n  // updates the state of allChannels - called when a new channel is added or a channel is deleted\r\n  updateAllChannels(category) {\r\n    const allChannels = { ...this.state.allChannels }; // gets current allChannels state to modify\r\n\r\n    if (this.isGroupMsg(category)) {\r\n      // updating Groups category\r\n      allChannels['Groups'] = Object.keys(this.allChannelData['Groups']);\r\n    } else {\r\n      // updating PMs category\r\n      allChannels['PMs'] = Object.keys(this.allChannelData['PMs']);\r\n    }\r\n\r\n    this.setState({ allChannels });\r\n  }\r\n\r\n  updateOnlineUsers(users) {\r\n    const onlineUsers = { ...users };\r\n    this.setState({ onlineUsers });\r\n  }\r\n\r\n  isGroupMsg(category) {\r\n    if (category === 'Groups') {\r\n      // msg is for the Groups category\r\n      return true;\r\n    }\r\n\r\n    return false; // msg if for the PMs category\r\n  }\r\n\r\n  socketSetup() {\r\n    const appServer = env.socketDomain;\r\n    this.socket = comms(this.props.username, appServer, this.onMsgReceived);\r\n\r\n    // joins all the group channels initially in state\r\n    this.socket.join(this.state.allChannels.Groups);\r\n  }\r\n\r\n  sendMsgToServer(msg) {\r\n    this.addNewMsg(msg); // appends new message to channel's messages\r\n\r\n    // sends message to the server\r\n    // send to the specified room based on the msg here\r\n    console.log(`sendMsgToServer() msg: ${JSON.stringify(msg)}\\n`);\r\n\r\n    if (this.isGroupMsg(msg.category)) {\r\n      // send as group msg to server\r\n      this.socket.sendGroupMsg(msg);\r\n    } else {\r\n      // send as PM msg to server\r\n      // pulls the socketId of the user the message is being sent to for the server\r\n      const sendTo = this.state.onlineUsers[msg.channel];\r\n\r\n      if (sendTo) {\r\n        this.socket.sendPrivateMsg({ sendTo: sendTo.socketId, msg: msg });\r\n      } else {\r\n        console.log('user offline');\r\n      }\r\n    }\r\n  }\r\n\r\n  // received a message from the server\r\n  onMsgReceived(type, data) {\r\n    // new group message received\r\n    if (type === 'new group message') {\r\n      this.addNewMsg(JSON.parse(data));\r\n    }\r\n\r\n    // new private message received\r\n    else if (type === 'new private message') {\r\n      data = JSON.parse(data);\r\n      data.channel = data.username; // updates channel to user who sent message\r\n\r\n      this.addNewMsg(data);\r\n    }\r\n\r\n    // update all online users state - initial server connection\r\n    else if (type === 'all online users') {\r\n      this.updateOnlineUsers(data);\r\n    }\r\n\r\n    //  new user joined - user object sent\r\n    else if (type === 'add online user') {\r\n      const updatedOnlineUsers = this.state.onlineUsers;\r\n      updatedOnlineUsers[data.username] = data; // adds the new online user\r\n\r\n      this.updateOnlineUsers(updatedOnlineUsers); // updates onlineUsers state\r\n    }\r\n\r\n    // user disconnected - user id sent\r\n    else if (type === 'remove online user') {\r\n      const updatedOnlineUsers = this.state.onlineUsers;\r\n      delete updatedOnlineUsers[data]; // removes the disconnected user\r\n\r\n      this.updateOnlineUsers(updatedOnlineUsers); // updates onlineUsers state\r\n    }\r\n  }\r\n\r\n  userSignout() {\r\n    this.props.signout(); // deletes authentication data\r\n    this.setState({ isSigningOut: true }); // displays the signout screen, then redirects to homepage\r\n  }\r\n\r\n  render() {\r\n    return this.state.isSigningOut ? (\r\n      <Signout />\r\n    ) : (\r\n      <article id=\"profile\">\r\n        <CategoriesPanel\r\n          allChannelRefs={this.allChannelRefs}\r\n          allChannels={this.state.allChannels}\r\n          username={this.props.username}\r\n          allOnlineUsers={this.state.onlineUsers}\r\n          onChannelSelect={this.onChannelSelect}\r\n          signout={this.userSignout}\r\n        />\r\n\r\n        <ChatView\r\n          channelInfo={this.state.selectedChannel}\r\n          sendNewMsg={this.sendMsgToServer}\r\n        />\r\n      </article>\r\n    );\r\n  }\r\n}\r\n\r\nconst UserProfileContext = props => {\r\n  return (\r\n    <AuthenticationContext.Consumer>\r\n      {({ isUserAuthenticated, signout }) => (\r\n        <UserProfile\r\n          {...props}\r\n          username={isUserAuthenticated.username}\r\n          signout={signout}\r\n        />\r\n      )}\r\n    </AuthenticationContext.Consumer>\r\n  );\r\n};\r\n\r\nexport default UserProfileContext;\r\n"],"sourceRoot":""}